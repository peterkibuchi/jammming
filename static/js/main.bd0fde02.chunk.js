(this.webpackJsonpjammming=this.webpackJsonpjammming||[]).push([[0],[,,,,,,,,,,,,,function(t,e,a){},function(t,e,a){},function(t,e,a){},,function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n,s=a(1),c=a.n(s),i=a(8),r=a.n(i),o=(a(13),a(3)),l=a(4),u=a(2),h=a(6),p=a(5),d=(a(14),Object({NODE_ENV:"production",PUBLIC_URL:"/jammming",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SPOTIFY_CLIENT_ID),m={getAccessToken:function(){if(n)return n;var t=window.location.href,e=t.match(/access_token=([^&]*)/),a=t.match(/expires_in=([^&]*)/);if(e&&a){n=e[1];var s=Number(a[1]);return window.setTimeout((function(){return n=""}),1e3*s),window.history.pushState("Access Token",null,"/"),n}var c="https://accounts.spotify.com/authorize?client_id=".concat(d,"&redirect_uri=").concat("http://localhost:3000/","&response_type=token&scope=playlist-modify-private");window.location=c},search:function(t){var e=m.getAccessToken();return fetch("https://api.spotify.com/v1/search?type=track&q=".concat(t),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(t){return t.json()})).then((function(t){return t.tracks?t.tracks.items.map((function(t){return{id:t.id,name:t.name,artist:t.artists[0].name,album:t.album.name,uri:t.uri}})):[]}))},savePlaylist:function(t,e){if(t&&e){var a,n=m.getAccessToken(),s={Authorization:"Bearer ".concat(n)};return fetch("https://api.spotify.com/v1/me",{headers:s}).then((function(t){return t.json()})).then((function(e){return a=e.id,fetch("https://api.spotify.com/v1/users/".concat(a,"/playlists"),{method:"POST",headers:s,body:JSON.stringify({name:t,public:!1})})})).then((function(t){return t.json()})).then((function(t){var a=t.id;return fetch("https://api.spotify.com/v1/playlists/".concat(a,"/tracks"),{method:"POST",headers:s,body:JSON.stringify({uris:e})})}))}}},j=m,b=(a(15),a(0)),v=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"Description",children:[Object(b.jsx)("p",{children:"Welcome. Jammming is a web application that allows you to search the Spotify library, create a custom playlist, name it, and save it to your Spotify account. Playlists will be set to private by default."}),Object(b.jsxs)("p",{children:["To function, Jammming will require you to log in to your Spotify account, after which it will request permission to act on your behalf. You can revoke this permission at any time at",Object(b.jsx)("a",{href:"https://www.spotify.com/account/apps/",target:"_blank",rel:"noopener noreferrer",children:" spotify.com/account"}),"."]}),Object(b.jsx)("p",{children:"To get started, simply search for music content of your choice. The application will take care of the rest. If at any point the website becomes unresponsive, simply reload the page. Enjoy."})]})}}]),a}(s.Component),y=(a(17),function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).state={query:""},n.search=n.search.bind(Object(u.a)(n)),n.handleTermChange=n.handleTermChange.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"handleTermChange",value:function(t){var e=t.target.value;this.setState({query:e})}},{key:"search",value:function(){this.props.onSearch(this.state.query)}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:"SearchBar",children:[Object(b.jsx)("input",{placeholder:"Enter a song, album, or artist",onChange:this.handleTermChange}),Object(b.jsx)("button",{className:"SearchButton",onClick:this.search,children:"SEARCH"})]})}}]),a}(s.Component)),f=(a(18),a(19),a(20),function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).addTrack=n.addTrack.bind(Object(u.a)(n)),n.removeTrack=n.removeTrack.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"addTrack",value:function(){this.props.onAdd(this.props.track)}},{key:"removeTrack",value:function(){this.props.onRemove(this.props.track)}},{key:"renderAction",value:function(){var t=Object(b.jsx)("button",{class:"Track-action",onClick:this.addTrack,children:"+"}),e=Object(b.jsx)("button",{class:"Track-action",onClick:this.removeTrack,children:"\u2014"});return this.props.isRemoval?e:t}},{key:"render",value:function(){var t=this.props.track;return Object(b.jsxs)("div",{className:"Track",children:[Object(b.jsxs)("div",{className:"Track-information",children:[Object(b.jsx)("h3",{children:t.name}),Object(b.jsxs)("p",{children:[t.artist," | ",t.album]})]}),this.renderAction()]})}}]),a}(s.Component)),O=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var t=this,e=this.props.tracks.map((function(e){return Object(b.jsx)(f,{track:e,onAdd:t.props.onAdd,onRemove:t.props.onRemove,isRemoval:t.props.isRemoval},e.id)}));return Object(b.jsx)("div",{className:"TrackList",children:e})}}]),a}(s.Component),k=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"SearchResults",children:[Object(b.jsx)("h2",{children:"Results"}),Object(b.jsx)(O,{tracks:this.props.searchResults,onAdd:this.props.onAdd,isRemoval:!1})]})}}]),a}(s.Component),T=(a(21),function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).handleNameChange=n.handleNameChange.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"handleNameChange",value:function(t){this.props.onNameChange(t.target.value)}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:"Playlist",children:[Object(b.jsx)("input",{defaultValue:"New Playlist",onChange:this.handleNameChange}),Object(b.jsx)(O,{tracks:this.props.playlistTracks,onRemove:this.props.onRemove,isRemoval:!0}),Object(b.jsx)("button",{className:"Playlist-save",onClick:this.props.onSave,children:"SAVE TO SPOTIFY"})]})}}]),a}(s.Component)),N=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).state={searchResults:[],playlistName:"My Playlist",playlistTracks:[]},n.search=n.search.bind(Object(u.a)(n)),n.addTrack=n.addTrack.bind(Object(u.a)(n)),n.removeTrack=n.removeTrack.bind(Object(u.a)(n)),n.savePlaylist=n.savePlaylist.bind(Object(u.a)(n)),n.updatePlaylistName=n.updatePlaylistName.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"search",value:function(t){var e=this;j.search(t).then((function(t){e.setState({searchResults:t})}))}},{key:"addTrack",value:function(t){var e=this.state.playlistTracks;e.find((function(e){return e.id===t.id}))||(e.push(t),this.setState({playlistTracks:e}))}},{key:"removeTrack",value:function(t){var e=this.state.playlistTracks;e=e.filter((function(e){return e.id!==t.id})),this.setState({playlistTracks:e})}},{key:"updatePlaylistName",value:function(t){this.setState({playlistName:t})}},{key:"savePlaylist",value:function(){var t=this,e=this.state.playlistName,a=this.state.playlistTracks.map((function(t){return t.uri}));j.savePlaylist(e,a).then((function(){t.setState({playlistName:"New Playlist",playlistTracks:[]})}))}},{key:"render",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsxs)("h1",{children:["Ja",Object(b.jsx)("span",{className:"highlight",children:"mmm"}),"ing"]}),Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(v,{}),Object(b.jsx)(y,{onSearch:this.search}),Object(b.jsxs)("div",{className:"App-playlist",children:[Object(b.jsx)(k,{searchResults:this.state.searchResults,onAdd:this.addTrack}),Object(b.jsx)(T,{playlistName:this.state.playlistName,playlistTracks:this.state.playlistTracks,onNameChange:this.updatePlaylistName,onRemove:this.removeTrack,onSave:this.savePlaylist})]})]})]})}}]),a}(s.Component);r.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(N,{})}),document.getElementById("root"))}],[[22,1,2]]]);
//# sourceMappingURL=main.bd0fde02.chunk.js.map